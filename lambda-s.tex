\subsection*{Lambda-$\mathcal{S}$}

$X = \lambda x : \mathbb{B}. x? \ket{0} \cdot \ket{1}$

$Z = \lambda x : \mathbb{B}. x? -\ket{1} \cdot \ket{0}$

$X^{b_2} = (\lambda b_2 : \mathbb{B}. \lambda q:\mathbb{B}. b_2 ? Xq \cdot q) \ b_2$

$Z^{b_1} = (\lambda b_1 : \mathbb{B}. \lambda q:\mathbb{B}. b_1 ? Zq \cdot q) \ b_1$

CNOT $ = \lambda q : \mathbb{B}^2. (\text{head } q)? (\text{head } q \times X (\text{tail } q)) \cdot q$

HI $ = \lambda q : (H \text{ head } q) \times \text{tail } q$

\begin{align*}
	(\lambda q : \mathbb{B}^2. \lambda b_1 : \mathbb{B}. \lambda b_2 : \mathbb{B}.\\
	& \pi_2 (\text{HI } (\text{CNOT } ((Z^{b_1} (X^{b_2} \text{ head } q)) \times (\text{tail } q))))\\
	) (\hr . (\ket{00} + \ket{11}))
\end{align*}

Derivación para $b_1 = \ket{1}, b_2 = \ket{1}$.

Siendo $F = (\lambda q : \mathcal{S}\mathbb{B}^2. \lambda b_1 : \mathbb{B}. \lambda b_2 : \mathbb{B}. \text{ HI CNOT } (((Z^{b_1} X^{b_2} \text{ head } q)) \times (\text{tail } q)))$

Ver que
\begin{align*}
	&(\lambda q : \mathcal{S}\mathbb{B}^2. \lambda b_1 : \mathbb{B}. \lambda b_2 : \mathbb{B}. \text{HI } (\text{CNOT } (((Z^{b_1} X^{b_2} \text{ head } q)) \times (\text{tail } q)))) (\hr . (\ket{00} + \ket{11})) \ket{1} \ket{1}\\
	&= F (\hr . (\ket{00} + \ket{11})) \ket{1} \ket{1} \ \text{por definición} \\
	&\xrightarrow{\text{lin}_r^\alpha} (\hr . (F (\ket{00} + \ket{11}))) \ket{1} \ket{1}\\
	&\xrightarrow{\text{lin}_r^+} (\hr . (F\ket{00} + F\ket{11})) \ket{1} \ket{1}\\
	&\xrightarrow{\text{lin}_l^\alpha} \hr . ((F\ket{00} + F\ket{11}) \ket{1} \ket{1})\\
	&\xrightarrow{\text{lin}_l^+} \hr . ((F\ket{00} \ket{1} + F\ket{11} \ket{1}) \ket{1})\\
	&\xrightarrow{\text{lin}_l^+} \hr . (F\ket{00} \ket{1} \ket{1} + F\ket{11} \ket{1} \ket{1})\\
\end{align*}

Analizamos primero $F\ket{00}\ket{1} \ket{1}$

\begin{align*}
	&(\lambda q : \mathcal{S}\mathbb{B}^2. \lambda b_1 : \mathbb{B}. \lambda b_2 : \mathbb{B}.\ (\text{HI } (\text{CNOT } (((Z^{b_1} X^{b_2} \text{ head } q)) \times (\text{tail } q))))) \ket{00} \ket{1} \ket{1} \\
	&\xrightarrow{\beta_n} (\lambda b_1 : \mathbb{B}. \lambda b_2 : \mathbb{B}.\ (\text{HI } (\text{CNOT }  (((Z^{b_1} X^{b_2} \text{ head } \ket{00})) \times (\text{tail } \ket{00}))))) \ket{1} \ket{1} \\
	&\xrightarrow{\beta_b^2} ((\text{HI } (\text{CNOT } (((Z^{\ket{1}} X^{\ket{1}} \text{ head } \ket{00})) \times (\text{tail } \ket{00}))))) \\
	&\xrightarrow{\text{head y tail}} \text{HI } (\text{CNOT } (((Z^{\ket{1}} (X^{\ket{1}} \ket{0}))) \times \ket{0})) \\
	&\xrightarrow{} \text{HI } (\text{CNOT } ((Z^{\ket{1}} ((\lambda q:\mathbb{B}. \ket{1} ? Xq \cdot q)) \ket{0})) \times \ket{0}) \\
	&\xrightarrow{} \text{HI } (\text{CNOT } ((Z^{\ket{1}} (\ket{1} ? X \ket{0} \cdot \ket{0})) \times \ket{0})) \\
	&\xrightarrow{} \text{HI } (\text{CNOT } (((Z^{\ket{1}} (X \ket{0}))) \times \ket{0})) \\
	&\xrightarrow{} \text{HI } (\text{CNOT } (((Z^{\ket{1}} \ket{1})) \times \ket{0})) \\
	&\xrightarrow{} \text{HI } (\text{CNOT } ((((\lambda q:\mathbb{B}. \ket{1} ? Zq \cdot q) \ket{1})) \times \ket{0})) \\
	&\xrightarrow{} \text{HI } (\text{CNOT } ((\ket{1} ? Z \ket{1} \cdot \ket{1}) \times \ket{0})) \\
	&\xrightarrow{} \text{HI } (\text{CNOT } ((Z \ket{1}) \times \ket{0})) \\
	&\xrightarrow{} \text{HI } (\text{CNOT } ((-\ket{1}) \times \ket{0})) \\
	&\xrightarrow{} \text{HI } ((\text{head } ((-\ket{1}) \times \ket{0}))? (\text{head } ((-\ket{1}) \times \ket{0}) \times X (\text{tail } ((-\ket{1}) \times \ket{0}))) \cdot ((-\ket{1}) \times \ket{0})) \\
	&\xrightarrow{} \text{HI } ((-\ket{1})? (\text{head } ((-\ket{1}) \times \ket{0}) \times X (\text{tail } ((-\ket{1}) \times \ket{0}))) \cdot ((-\ket{1}) \times \ket{0})) \\
	&\xrightarrow{} \text{HI } (-(\ket{1}? (\text{head } ((-\ket{1}) \times \ket{0}) \times X (\text{tail } ((-\ket{1}) \times \ket{0}))) \cdot ((-\ket{1}) \times \ket{0}))) \\
	&\xrightarrow{} \text{HI } (-((\text{head } ((-\ket{1}) \times \ket{0}) \times X (\text{tail } ((-\ket{1}) \times \ket{0}))))) \\
	&\xrightarrow{} \text{HI } (-((-\ket{1}) \times X (\text{tail } ((-\ket{1}) \times \ket{0})))) \\
	&\xrightarrow{} \text{HI } (-((-\ket{1}) \times X \ket{0})) \\
	&\xrightarrow{} \text{HI } (-((-\ket{1}) \times \ket{1})) \\
	&\xrightarrow{} - (\text{HI } ((-\ket{1}) \times \ket{1})) \\
	&\xrightarrow{} - ((-\ket{-}) \times \ket{1}) \\
	&\xrightarrow{} - (\ket{-} \times \ket{1}) \text{ suponiendo la conmutatividad suma}\\
	&= - \ket{-1} \\
\end{align*}

Analizamos ahora $F\ket{11}\ket{1} \ket{1}$

\begin{align*}
	&(\lambda q : \mathcal{S}\mathbb{B}^2. \lambda b_1 : \mathbb{B}. \lambda b_2 : \mathbb{B}. \text{HI } (\text{CNOT } (((Z^{b_1} X^{b_2} \text{ head } q)) \times (\text{tail } q))) \ket{11} \ket{1} \ket{1}) \\
	&\xrightarrow{}(\lambda b_1 : \mathbb{B}. \lambda b_2 : \mathbb{B}. \text{ HI CNOT } (((Z^{b_1} X^{b_2} \text{ head } \ket{11})) \times (\text{tail } \ket{11}))) \ket{1} \ket{1} \\
	&\xrightarrow{}( \text{ HI CNOT } (((Z^{\ket{1}} X^{\ket{1}} \text{ head } \ket{11})) \times (\text{tail } \ket{11}))) \\
	&\xrightarrow{}(\text{ HI CNOT } (((Z^{\ket{1}} X^{\ket{1}} \ket{1})) \times \ket{1})) \\
	&\xrightarrow{}(\text{ HI CNOT } (((Z^{\ket{1}} X \ket{1})) \times \ket{1})) \\
	&\xrightarrow{}(\text{ HI CNOT } (((Z^{\ket{1}} \ket{0})) \times \ket{1})) \\
	&\xrightarrow{}(\text{ HI CNOT } (((Z \ket{0})) \times \ket{1})) \\
	&\xrightarrow{}(\text{ HI CNOT } (\ket{01})) \\
	&\xrightarrow{}\text{ HI} (\ket{01}) \\
	&\xrightarrow{}\ket{+1}
\end{align*}

Volviendo tenemos:
\[\xrightarrow{} \hr . (F\ket{00}\ket{1} \ket{1} + F\ket{11}\ket{1} \ket{1})\]
\[\xrightarrow{} \hr . (\pi_2(-\ket{-1}) + \pi_2(\ket{+1}))\]
\[\xrightarrow{} \hr . (-\ket{-1} + \ket{+1})\]
\[\xrightarrow{} \hr . [-(\hr(\ket{0} - \ket{1})) \times \ket{1} + (\hr(\ket{0} + \ket{1})) \times \ket{1}]\]
\[\xrightarrow{} \frac{1}{2}(-(\ket{0} - \ket{1}) \times \ket{1} + (\ket{0} + \ket{1}) \times \ket{1})\]
\[\xrightarrow{} \frac{1}{2}(-\ket{01} + \ket{11} + \ket{01} + \ket{11})\]
\[\xrightarrow{} \frac{1}{2}(2 . \ket{11})\]
\[\xrightarrow{} \ket{11}\]

